$schema: "http://json-schema.org/draft-04/schema#"

id: "exposure"
title: Exposure
type: object
namespace: http://dcp.bionimbus.org/
category: clinical
program: '*'
project: '*'
description: >
  Clinically relevant patient information not immediately resulting from genetic predispositions.
additionalProperties: false
submittable: true
validators: null

systemProperties:
  - id
  - project_id
  - state
  - created_datetime
  - updated_datetime

links:
  - name: cases
    backref: exposures
    label: describes
    target_type: case
    multiplicity: many_to_one
    required: true

required:
  - type
  - submitter_id
  - cases

preferred:
  - cigarettes_per_day
  - years_smoked

uniqueKeys:
  #unclear if want submitter ID for clinical
  - [id]
  - [project_id, submitter_id]

properties:
  $ref: "_definitions.yaml#/ubiquitous_properties"

# HARMONIZED VARIABLES ACROSS GTEX AND TOPMED PROJECTS
  smoking_status:
    description: >
      Smoking condition (HARMONIZED)
    enum:
      - "NEVER"
      - "FORMER"
      - "CURRENT"

  years_smoked:
    term:
      $ref: "_terms.yaml#/years_smoked"
    type:
      - number
      - "null"
    maximum: 89
    minimum: 0

  years_smoked_gt89:
    term:
      $ref: "_terms.yaml#/years_smoked_gt89"
    enum:
      - "Yes"
      - "No"

# OTHER NON HARMONIZED VARIABLES FROM GTEX AND TOPMED

  air_pollution_no2:
    description: >
      No2 Air Pollution measurement, lifetime average.
    type: number

  air_pollution_pm25:
    description: >
      PM25 Air Pollution measurement, lifetime average.
    type: number

  alcohol_status:
    description: >
      Alcohol use
    enum:
      - "NEVER"
      - "FORMER"
      - "CURRENT"

  alcohol_history:
    term:
      $ref: "_terms.yaml#/alcohol_history"
    type: string

  alcohol_intensity:
    term:
      $ref: "_terms.yaml#/alcohol_intensity"
    type: string

  alcohol_start_age:
    description: >
      Alcohol: age in years started drinking. If age is greater than 89 years, see 'alcohol_start_age_gt89'.
    type: number
    maximum: 89
    minimum: 0

  alcohol_start_age_gt89:
    description: >
      Indicate whether Alcohol: age in years started drinking is greater than 89.
    enum:
      - "Yes"
      - "No"

  anthro_protocol_modification:
    description: >
      Comments, anthro protocol modification
    type: boolean

  chewing_smoked_20_lifetime:
    description: >
      Chewed tobacco at least 20 times in lifetime
    type: boolean

  chewing_smoking_start_age:
    description: >
      Chewing tobacco: age in years started use. If age is greater than 89 years, see 'chewing_smoking_start_age_gt89'.
    type: number
    maximum: 89
    minimum: 0

  chewing_smoking_start_age_gt89:
    description: >
      Indicate whether Chewing tobacco: age in years started use is greater than 89 years.
    enum:
      - "Yes"
      - "No"

  chewing_smoking_last_month:
    description: >
      Chewing tobacco: used in last 30 days
    type: boolean

  chewing_smoking_quit_age:
    description: >
      Chewing tobacco: age in years quit use. If age is greater than 89 years, see 'chewing_smoking_quit_age_gt89'.
    type: number
    maximum: 89
    minimum: 0

  chewing_smoking_quit_age_gt89:
    description: >
      Indicate whether Chewing tobacco: age in years quit use is greater than 89 years.
    enum:
      - "Yes"
      - "No"

  chewing_per_day:
    description: >
      Chewing tobacco: average # uses per day
    type: number

  chewing_status:
    description: >
      Chewing tobacco use
    enum:
      - "NEVER"
      - "FORMER"
      - "CURRENT"

  chewing_amount:
    description: >
      Chewing tobacco amount (# times chewed per day * years)
    type: number

  cigarettes_per_day:
    term:
      $ref: "_terms.yaml#/cigarettes_per_day"
    type: number

  cigarettes_smoking_status:
    description: >
      Cigarette smoking status
    enum:
      - "NEVER"
      - "FORMER"
      - "CURRENT"

  cigarettes_smoked_100_lifetime:
    description: >
      Smoked at least 100 cigarettes in lifetime
    type: boolean

  cigarettes_smoking_start_age:
    description: >
      Cigarettes: age in years started smoking. If age is greater than 89 years, see 'cigarettes_smoking_start_age_gt89'.
    type: number
    maximum: 89
    minimum: 0

  cigarettes_smoking_start_age_gt89:
    description: >
      Indicate whether Cigarettes: age in years started smoking is greater than 89 years.
    enum:
      - "Yes"
      - "No"

  cigarettes_smoking_last_month:
    description: >
      Cigarettes: smoked in last 30 days
    type: boolean

  cigarettes_smoking_quit_age:
    description: >
      Cigarettes: age in years quit smoking. If the age is greater than 89 years, see 'cigarettes_smoking_quit_age_gt89'.
    type: number
    maximum: 89
    minimum: 0

  cigarettes_smoking_quit_age_gt89:
    description: >
      Indicate whether Cigarettes: age in years quit smoking is greater than 89 years.
    enum:
      - "Yes"
      - "No"

  cigars_smoked_20_lifetime:
    description: >
      Smoked more than 20 cigars in lifetime
    type: boolean

  cigars_smoking_start_age:
    description: >
      Cigars: age in years started smoking. If age is greater than 89 years, see 'cigars_smoking_start_age_gt89'.
    type: number
    maximum: 89
    minimum: 0

  cigars_smoking_start_age_gt89:
    description: >
      Indicate whether Cigars: age in years started smoking is greater than 89 years.
    enum:
      - "Yes"
      - "No"

  cigars_smoking_last_month:
    description: >
      Cigars: smoked in last 30 days
    type: boolean

  cigars_smoking_quit_age:
    description: >
      Cigars: age in years quit smoking. If age is greater than 89 years, see 'cigars_smoking_quit_age_gt89'.
    type: number
    maximum: 89
    minimum: 0

  cigars_smoking_quit_age_gt89:
    description: >
      Indicate whether Cigars: age in years quit smoking is greater than 89 years.
    enum:
      - "Yes"
      - "No"

  cigars_per_day:
    description: >
      Cigars: average # smoked per day
    type: number

  cigar_smoking_status:
    description: >
      Cigar smoking status
    enum:
      - "NEVER"
      - "FORMER"
      - "CURRENT"

  cigar_amount:
    description: >
      Cigar smoking amount (cigars per day * years)
    type: number

  consumed_alcohol:
    description: >
      Ever consumed alcoholic beverages
    type: boolean

  current_drinks_per_week:
    description: >
      # drinks per week (current drinkers)
    type: number

  current_years_drinking:
    description: >
      The number of years drinking alcohol (current drinkers). If the number of years is greater than 89, see 'current_years_drinking_gt89'.
    type: number
    maximum: 89
    minimum: 0

  current_years_drinking_gt89:
    description: >
      Indicate whether the number of years drinking alcohol (current drinkers) is greater than 89.
    enum:
      - "Yes"
      - "No"

  drinks_past_24h:
    description: >
      Drinks in past 24 hours (current drinkers)
    type: number

  former_drinker_years:
    description: >
      The number of years drinking alcohol (former drinkers). If the number of years is greater than 89, see 'former_drinker_years_gt89'.
    type: number
    maximum: 89
    minimum: 0

  former_drinker_years_gt89:
    description: >
      Indicate whether the number of years drinking alcohol (former drinkers) is greater than 89.
    enum:
      - "Yes"
      - "No"

  former_wine_drinker:
    description: >
      Drank wine (former drinkers)
    type: boolean

  former_beer_drinker:
    description: >
      Drank beer (former drinkers)
    type: boolean

  former_liquor_drinker:
    description: >
      Hard liquor (former drinkers)
    type: boolean

  former_other_drinker:
    description: >
      Other alcohol (former drinkers)
    type: boolean

  former_drinks_per_week:
    description: >
      # drinks per week when drinking (former drinkers)
    type: number

  years_drinking:
    description: >
      The number of years drinking alcohol (current and former drinkers). If number of years is over 89 years, see 'years_drinking_gt89'.
    type: number
    maximum: 89
    minimum: 0

  years_drinking_gt89:
    description: >
      Indicate whether the number of years drinking alcohol (current and former drinkers) is over 89 years.
    enum:
      - "Yes"
      - "No"

  drinks_per_week:
    description: >
      # drinks per week (current and former drinkers)
    type: number

  form_completed_at_home:
    description: >
      Form completed at home
    type: boolean

  form_completed_at_clinic:
    description: >
      Form completed at clinic
    type: boolean

  hours_smoke_exposed_per_week:
    description: >
      Exposure to second-hand smoke, hours per week
    type: number

  largest_drink_one_day:
    description: >
      Largest # of drinks in one day, in past month (current drinkers)
    type: number

  other_tobacco_used:
    description: >
      Ever used other tobacco products
    type: boolean

  pack_years_smoked:
    term:
      $ref: "_terms.yaml#/pack_years_smoked"
    type: number

  pipe_smoked_20_lifetime:
    description: >
      Smoked at least 20 pipefuls of tobacco in lifetime
    type: boolean

  pipe_smoking_start_age:
    description: >
      Pipe: age in years started smoking. If age is greater than 89 years, see 'pipe_smoking_start_age_gt89'.
    type: number
    maximum: 89
    minimum: 0

  pipe_smoking_start_age_gt89:
    description: >
      Indicate whether Pipe: age in years started smoking is greater than 89 years.
    enum:
      - "Yes"
      - "No"

  pipe_smoking_last_month:
    description: >
      Pipe: smoked in last 30 days
    type: boolean

  pipe_smoking_quit_age:
    description: >
      Pipe: age in years quit smoking. If age is greater than 89 years, see 'pipe_smoking_quit_age_gt89'.
    type: number
    maximum: 89
    minimum: 0

  pipe_smoking_quit_age_gt89:
    description: >
      Indicate whether Pipe: age in years quit smoking is greater than 89 years.
    enum:
      - "Yes"
      - "No"

  pipe_per_day:
    description: >
      Pipe: average # smoked per day
    type: number

  pipe_smoking_status:
    description: >
      Pipe smoking status
    enum:
      - "NEVER"
      - "FORMER"
      - "CURRENT"

  pipe_amount:
    description: >
      Pipe smoking amount (pipefuls per day * years)
    type: number

  questionnaire_administrator:
    description: >
      Questionnaire administrator - personal history
    enum:
      - "SELF-ADMIN"
      - "INTERVIEWER-ADMIN"

  questionnaire_administration_mode:
    description: >
      Pa questionnaire: mode of administration
    enum:
      - "MISSING"
      - "SELF-ADMINISTERED"
      - "INTERVIEWER-ADMINISTERED"

  snuff_status:
    description: >
      Snuff use
    enum:
      - "NEVER"
      - "FORMER"
      - "CURRENT"

  snuff_amount:
    description: >
      Snuff use amount (# times use per day * years)
    type: number

  snuff_smoked_20_lifetime:
    description: >
      Used snuff at least 20 times in lifetime
    type: boolean

  snuff_smoking_start_age:
    description: >
      Snuff: age in years started use. If age is greater than 89 years, see 'snuff_smoking_start_age_gt89'.
    type: number
    maximum: 89
    minimum: 0

  snuff_smoking_start_age_gt89:
    description: >
      Indicate whether Snuff: age in years started use is greater than 89 years.
    enum:
      - "Yes"
      - "No"

  snuff_smoking_last_month:
    description: >
      Snuff: used in last 30 days
    type: boolean

  snuff_smoking_quit_age:
    description: >
      Snuff: age in years quit use. If age is greater than 89 years, see 'snuff_smoking_quit_age_gt89'.
    type: number
    maximum: 89
    minimum: 0

  snuff_smoking_quit_age_gt89:
    description: >
      Indicate whether Snuff: age in years quit use is greater than 89 years.
    enum:
      - "Yes"
      - "No"

  snuff_per_day:
    description: >
      Snuff: average # uses per day
    type: number
  
  current_smoker_baseline:
    description: >
      Indicates whether subject currently smokes cigarettes.
    type: boolean

  age_at_current_smoker_baseline:
    description: >
      age at measurement of current_smoker_baseline (years)
    type: number

  age_at_ever_smoker_baseline:
    description: >
      age at measurement of ever_smoker_baseline (years)
    type: number

  ever_smoker_baseline:
    description: >
      Indicates whether subject ever regularly smoked cigarettes.
    enum:
      - "Never a cigarette smoker"
      - "Current or former cigarette smoker"

  unit_current_smoker_baseline:
    description: >
      harmonization unit for current_smoker_baseline
    type: string

  unit_ever_smoker_baseline:
    description: >
      harmonization unit for ever_smoker_baseline
    type: string

  cases:
    $ref: "_definitions.yaml#/to_one"
